<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Keep Me Focus - Options</title>
		<script defer src="../scripts/options.js"></script>
		<style>
			body {
				/* We hide the body initially to prevent flash of unstyled content (FOUC) */
				display: none;
			}
		</style>
	</head>
	<body class="bg-gray-50 min-h-screen !block">
		<!-- SVG Icon Definitions -->
		<svg class="hidden">
			<defs>
				<symbol id="icon-block" viewBox="0 0 24 24">
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						stroke-width="2"
						d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM4.92893 4.92893L19.0711 19.0711"
					></path>
				</symbol>
				<symbol id="icon-limit" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
				</symbol>
				<symbol id="icon-allow" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
				</symbol>
			</defs>
		</svg>

		<div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
			<!-- Header -->
			<div class="flex items-center justify-center mb-8 gap-3">
				<img src="../icons/icon128.png" alt="Keep Me Focus Logo" class="h-[50px]" />
				<div>
					<h1 class="text-3xl font-bold text-gray-900 mb-2">Keep Me Focus</h1>
					<p class="text-gray-600">Manage your focus by setting rules for websites</p>
				</div>
			</div>

			<!-- Main Content Card -->
			<div class="bg-white rounded-xl shadow-lg overflow-hidden">
				<div class="px-6 py-4 bg-gradient-to-r from-blue-500 to-purple-600">
					<h2 class="text-xl font-semibold text-white flex items-center">
						<svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002-2h2a2 2 0 002 2h2a2 2 0 012 2v1"
							></path>
						</svg>
						Site Rules Management
					</h2>
				</div>

				<div class="p-6">
					<!-- Layout with Presets and Form Side by Side -->
					<div class="space-y-8">
						<!-- Top Row: Presets and Add Rule Form Side by Side -->
						<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
							<!-- Quick Presets Section -->
							<div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
								<h3 class="text-lg font-medium text-gray-900 mb-3 flex items-center">
									<svg class="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
									</svg>
									Quick Presets
								</h3>
								<p class="text-sm text-gray-600 mb-4">Click on a preset to populate the form with common website rules</p>
								<div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
									<button
										class="preset-btn bg-red-50 hover:bg-red-100 border border-red-200 text-red-700 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-md active:scale-95 flex items-center"
										data-preset="block-youtube-shorts"
										title="Load preset to block access to YouTube Shorts pages"
									>
										<svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor"><use href="#icon-block" /></svg>
										Block YouTube Shorts
									</button>
									<button
										class="preset-btn bg-amber-50 hover:bg-amber-100 border border-amber-200 text-amber-700 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-md active:scale-95 flex items-center"
										data-preset="limit-youtube"
										title="Load preset to allow 30 minutes of YouTube per day"
									>
										<svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor"><use href="#icon-limit" /></svg>
										Limit YouTube (30min)
									</button>
									<button
										class="preset-btn bg-red-50 hover:bg-red-100 border border-red-200 text-red-700 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-md active:scale-95 flex items-center"
										data-preset="block-facebook"
										title="Load preset to completely block Facebook"
									>
										<svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor"><use href="#icon-block" /></svg>
										Block Facebook
									</button>
									<button
										class="preset-btn bg-red-50 hover:bg-red-100 border border-red-200 text-red-700 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-md active:scale-95 flex items-center"
										data-preset="block-instagram"
										title="Load preset to completely block Instagram"
									>
										<svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor"><use href="#icon-block" /></svg>
										Block Instagram
									</button>
									<button
										class="preset-btn bg-red-50 hover:bg-red-100 border border-red-200 text-red-700 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-md active:scale-95 flex items-center"
										data-preset="block-twitter"
										title="Load preset to block both Twitter.com and X.com"
									>
										<svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor"><use href="#icon-block" /></svg>
										Block Twitter/X
									</button>
									<button
										class="preset-btn bg-red-50 hover:bg-red-100 border border-red-200 text-red-700 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-md active:scale-95 flex items-center"
										data-preset="block-tiktok"
										title="Load preset to completely block TikTok"
									>
										<svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor"><use href="#icon-block" /></svg>
										Block TikTok
									</button>
									<button
										class="preset-btn bg-amber-50 hover:bg-amber-100 border border-amber-200 text-amber-700 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-md active:scale-95 flex items-center"
										data-preset="limit-social-media"
										title="Load preset to limit all major social media to 15 minutes per day"
									>
										<svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor"><use href="#icon-limit" /></svg>
										Limit Social Media (15min)
									</button>
									<button
										class="preset-btn bg-blue-50 hover:bg-blue-100 border border-blue-200 text-blue-700 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-md active:scale-95 flex items-center"
										data-preset="delay-distractions"
										title="Load preset to add 10-minute delay before accessing distracting sites"
									>
										<svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor"><use href="#icon-limit" /></svg>
										Delay Distractions (10min)
									</button>
									<button
										class="preset-btn bg-green-50 hover:bg-green-100 border border-green-200 text-green-700 px-3 py-3 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-md active:scale-95 flex items-center"
										data-preset="allow-work-sites"
										title="Load preset to block all sites except work-related ones (using negative matching)"
									>
										<svg class="w-4 h-4 mr-2 flex-shrink-0" fill="none" stroke="currentColor"><use href="#icon-allow" /></svg>
										Allow Only Work Sites
									</button>
								</div>
							</div>

							<!-- Add/Edit Rule Form -->
							<div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
								<h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
									<svg class="w-5 h-5 mr-2 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
									</svg>
									Custom Rule
								</h3>

								<div class="space-y-4">
									<!-- Title Field -->
									<div>
										<label for="rule-title" class="block text-sm font-medium text-gray-700 mb-2"> Rule Name/Title </label>
										<input
											type="text"
											id="rule-title"
											placeholder="e.g., Block Social Media, Limit YouTube, Allow Work Sites..."
											class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400"
										/>
									</div>

									<!-- Main Rule Configuration -->
									<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
										<!-- Match Type -->
										<div>
											<label for="rule-match-type" class="block text-sm font-medium text-gray-700 mb-2"> Site URL is </label>
											<select
												id="rule-match-type"
												class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"
											>
												<option value="equalTo">Equal To</option>
												<option value="startsWith">Starts With</option>
												<option value="endsWith">Ends With</option>
												<option value="contains">Contains</option>
												<option value="regex">Regex</option>
												<option value="notEqualTo">Not Equal To</option>
												<option value="notStartsWith">Not Starts With</option>
												<option value="notEndsWith">Not Ends With</option>
												<option value="notContains">Not Contains</option>
												<option value="notRegex">Not Regex</option>
											</select>
										</div>

										<!-- Action -->
										<div>
											<label for="rule-action" class="block text-sm font-medium text-gray-700 mb-2"> Action </label>
											<select
												id="rule-action"
												class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"
											>
												<option value="allow">Allow</option>
												<option value="block">Block</option>
												<option value="limit">Limit</option>
											</select>
										</div>
									</div>

									<!-- Pattern Input -->
									<div>
										<label for="rule-pattern" class="block text-sm font-medium text-gray-700 mb-2"> Pattern </label>
										<input
											type="text"
											id="rule-pattern"
											placeholder="Enter URL pattern..."
											class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400"
										/>
									</div>

									<!-- Action Buttons -->
									<div class="flex gap-3">
										<button
											id="save-rule-btn"
											class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center justify-center"
										>
											<svg id="save-rule-icon" class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
											</svg>
											<span id="save-rule-text">Add Rule</span>
										</button>
										<button
											id="cancel-edit-btn"
											class="flex-1 bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded-md transition-colors duration-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 hidden items-center justify-center"
										>
											<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
											</svg>
											Cancel Edit
										</button>
									</div>

									<!-- Limit Options (shown only when action is 'limit') -->
									<div id="limit-options" class="hidden bg-blue-50 border border-blue-200 rounded-lg p-4">
										<h4 class="text-sm font-medium text-blue-900 mb-3 flex items-center">
											<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
												<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
											</svg>
											Time Limit Settings
										</h4>
										<p class="text-xs text-blue-700 mb-3">
											Configure time restrictions. Set at least one parameter: time limit, reset period, or access delay.
										</p>
										<div class="grid grid-cols-1 gap-4">
											<!-- Allowed Minutes -->
											<div>
												<label for="rule-allowed-minutes" class="block text-sm font-medium text-gray-700 mb-2"> Allowed Time (minutes) </label>
												<input
													type="number"
													id="rule-allowed-minutes"
													min="0"
													placeholder="e.g., 5 (0 = unlimited)"
													class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400"
												/>
												<p class="text-xs text-gray-500 mt-1">How long the site can be accessed (0 = unlimited)</p>
											</div>

											<!-- Reset After Minutes -->
											<div>
												<label for="rule-reset-after-minutes" class="block text-sm font-medium text-gray-700 mb-2"> Reset After (minutes) </label>
												<input
													type="number"
													id="rule-reset-after-minutes"
													min="0"
													placeholder="e.g., 60 (0 = no reset)"
													class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400"
												/>
												<p class="text-xs text-gray-500 mt-1">When the time limit resets (0 = no reset)</p>
											</div>

											<!-- Delay Minutes -->
											<div>
												<label for="rule-delay-minutes" class="block text-sm font-medium text-gray-700 mb-2"> Access Delay (minutes) </label>
												<input
													type="number"
													id="rule-delay-minutes"
													min="0"
													placeholder="e.g., 30 (30 minutes)"
													class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400"
												/>
												<p class="text-xs text-gray-500 mt-1">Time after browser opens before site access</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>

						<!-- Bottom Row: Current Rules (Full Width) -->
						<div class="bg-white rounded-lg p-6 border border-gray-200 shadow-sm">
							<h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
								<svg class="w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2h2a2 2 0 012 2v1"
									></path>
								</svg>
								Active Rules
							</h3>
							<div class="bg-gray-50 border border-gray-200 rounded-lg overflow-hidden">
								<ul id="rules-list" class="divide-y divide-gray-200">
									<!-- Empty state -->
									<li class="p-8 text-center text-gray-500" id="empty-state">
										<svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
											<path
												stroke-linecap="round"
												stroke-linejoin="round"
												stroke-width="1.5"
												d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
											></path>
										</svg>
										<p class="text-sm font-medium">No rules configured yet</p>
										<p class="text-xs text-gray-400 mt-1">Add your first rule using presets or custom form</p>
									</li>
									<!-- Rules will be dynamically added here -->
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Footer -->
			<div class="text-center mt-8 text-sm text-gray-500">
				<p>Made with ❤️ by <a href="https://ararif.me" target="_blank" class="text-blue-500 hover:text-blue-600 transition-colors">A R Arif</a></p>
			</div>
		</div>
	</body>
</html>
